/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java application project to get you started.
 * For more details on building Java & JVM projects, please refer to https://docs.gradle.org/8.10/userguide/building_java_projects.html in the Gradle documentation.
 */

plugins {
    // Apply the application plugin to add support for building a CLI application in Java.
    id 'application'
    id 'com.github.johnrengelman.shadow' version '8.1.1'
}

repositories {
    // Use Maven Central for resolving dependencies.
    mavenCentral()
}

dependencies {
    // Use JUnit test framework.
    // testImplementation libs.junit

    // https://mvnrepository.com/artifact/junit/junit
    testImplementation group: 'junit', name: 'junit', version: '4.13.2'

    // https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter-api
    testImplementation group: 'org.junit.jupiter', name: 'junit-jupiter-api', version: '5.10.2'

    // https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter-engine
    testRuntimeOnly group: 'org.junit.jupiter', name: 'junit-jupiter-engine', version: '5.10.2'

    implementation 'mysql:mysql-connector-java:8.0.33'

    // https://mvnrepository.com/artifact/org.hibernate.orm/hibernate-core
    implementation group: 'org.hibernate.orm', name: 'hibernate-core', version: '6.5.2.Final'

    // https://mvnrepository.com/artifact/org.hibernate.javax.persistence/hibernate-jpa-2.1-api
    implementation group: 'org.hibernate.javax.persistence', name: 'hibernate-jpa-2.1-api', version: '1.0.0.Final'

    // https://mvnrepository.com/artifact/com.zaxxer/HikariCP
    implementation group: 'com.zaxxer', name: 'HikariCP', version: '5.1.0'

    // https://mvnrepository.com/artifact/org.slf4j/slf4j-api
    implementation group: 'org.slf4j', name: 'slf4j-api', version: '2.0.13'

    // https://mvnrepository.com/artifact/ch.qos.logback/logback-classic
    implementation group: 'ch.qos.logback', name: 'logback-classic', version: '1.5.6'

    // https://mvnrepository.com/artifact/com.h2database/h2
    implementation group: 'com.h2database', name: 'h2', version: '2.2.224'

    // https://mvnrepository.com/artifact/org.hsqldb/hsqldb
    implementation group: 'org.hsqldb', name: 'hsqldb', version: '2.7.1'


}

shadowJar {
    archiveFileName = 'snoflo-randomquiz.jar'  // 의존성이 포함된 JAR 이름
    manifest {
        attributes(
            'title' : 'snoflo-randomquiz',
            'version' : 'v1.0.0 -beta',
            'Main-Class' : 'org.snoflo.App'
        )
    }
}

// Apply a specific Java toolchain to ease working on different environments.
java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(21)
    }
}

application {
    // Define the main class for the application.
    mainClass = 'org.snoflo.App'
}

tasks.named('run') {
    standardInput = System.in  // 표준 입력 활성화
}

/* 
 * ./gradlew build시 활성화 요망
 */

// tasks.named('jar') {
//     enabled = false
// }

// tasks.build {
//     dependsOn tasks.shadowJar
// }

// tasks.named('distZip') {
//     dependsOn tasks.named('shadowJar')  // distZip 작업이 shadowJar 작업에 의존
// }

// tasks.named('distTar') {
//     dependsOn tasks.named('shadowJar')  // distTar 작업이 shadowJar 작업에 의존
// }

// tasks.named('startScripts') {
//     dependsOn tasks.named('shadowJar')  // startScripts 작업이 shadowJar 작업에 의존
// }
// tasks.named('startShadowScripts') {
//     dependsOn tasks.named('shadowJar')  // startShadowScripts 작업이 shadowJar 작업에 의존
// }

